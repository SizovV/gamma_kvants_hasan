import numpy as np
import numpy.linalg as linalg
import pandas as pd
import seaborn as sea
import matplotlib
from mpl_toolkits.mplot3d import Axes3D
import matplotlib.pyplot as plt
from matplotlib import animation
from mpl_toolkits.mplot3d import Axes3D
from matplotlib import cm
sea.set()
import ast
import sys
matplotlib.use('Qt5Agg')

d = [[[-5.63585,3.89752,-10.1416],[-6.44709,3.17991,-1.47674]],[[-0.0167852,7.35466,71.7566],[-2.5529,7.38295,82.1052]],[[1.97974,-7.46452,55.0453],[1.85117,-5.02594,62.7032]],[[-4.8497,-7.81243,11.8671],[-9.14481,-7.4825,9.50167]],[[-4.10688,8.71883,51.5876],[-4.09246,7.58181,47.0545]],[[4.03119,-9.9823,87.6757],[4.35838,-9.71594,86.5162]],[[-2.4369,9.22056,95.5715],[-3.04514,7.73476,95.887]],[[-8.22321,-14.5235,19.0713],[-7.73878,-10.5839,25.2892]],[[-0.262154,0.0466933,21.381],[6.4234,-0.467842,19.8635]],[[-8.92758,-0.339671,36.6219],[10.0226,-0.97472,35.9505]],[[1.16489,9.22239,85.9972],[7.25084,10.7203,93.887]],[[-5.96362,-3.75286,60.7523],[-15.6008,-7.66709,60.7477]],[[-0.818201,0.356151,24.2747],[5.84201,-5.47162,61.0421]],[[-1.45909,5.4265,16.8892],[-12.8931,0.0333518,8.76991]],[[-5.54003,-3.22733,56.6701],[-7.28577,-4.85613,41.2873]],[[-6.73208,1.85583,47.915],[-6.72888,5.5359,75.1399]],[[4.54512,-0.396435,8.06696],[4.39503,-0.000151355,28.2731]],[[6.88406,0.125431,52.7692],[6.52065,-2.52253,48.8335]],[[-0.295724,-13.3442,38.0251],[-5.36877,-12.1145,41.9279]],[[-1.82348,0.0155644,40.4221],[-3.92585,1.23586,55.9506]],[[-2.68838,-9.2645,59.913],[-3.42562,13.4937,46.8616]],[[3.6552,8.38557,74.3348],[3.35198,8.45739,95.8893]],[[7.00858,-2.12867,61.746],[7.28576,-0.787154,60.139]],[[4.47859,-1.58483,87.8637],[7.25807,-4.3541,94.7731]],[[-0.897549,-1.26438,108.926],[3.01569,-4.74629,115.379]],[[5.6212,-4.03302,-8.64437],[5.53124,-1.42547,-0.317399]],[[-2.72256,9.6765,55.1326],[7.78425,8.64963,9.46797]],[[-4.35774,3.81512,93.7251],[-5.00552,8.70856,118.419]],[[-4.61287,-4.00922,90.2405],[-4.93646,0.26442,90.6345]],[[-6.27979,-8.18049,18.3126],[-13.8024,-6.49961,52.4599]],[[5.68773,-1.40172,21.6294],[7.65387,-5.59759,15.4072]],[[-9.08383,9.98596,10.2087],[-29.7934,-1.86066,-0.150167]],[[-7.94549,3.8554,10.6183],[-14.0037,0.663899,12.6062]],[[5.04379,7.5103,11.5583],[5.10869,-1.83098,19.4993]],[[5.09751,3.06986,38.6093],[7.84218,6.01813,3.19774]],[[5.78967,4.46333,88.0047],[4.08559,0.32918,73.7317]],[[5.86291,9.81933,46.8004],[-1.63747,-9.00254,46.5548]],[[-1.46641,13.6464,93.3357],[0.974025,13.1777,89.4005]],[[0.343333,-3.94147,21.9047],[8.94826,-4.10685,13.2138]],[[8.88302,-2.32459,48.9691],[9.44508,-1.17673,42.7369]],[[-1.38157,-5.26536,98.3309],[-1.27781,-5.27369,140.382]],[[-3.20048,2.91238,59.0469],[-3.75035,1.19826,27.9314]],[[-3.9732,-4.64095,78.746],[1.71516,-12.8761,78.6061]],[[0.0619526,-11.0224,39.3277],[-0.110273,-9.78477,61.3064]],[[7.2869,1.02817,66.0967],[17.9862,3.797,77.7959]],[[-6.62832,-5.39171,63.5588],[-6.84089,-2.58167,84.8314]],[[-0.46968,21.3334,28.988],[0.637172,-0.484719,28.4219]],[[-2.54494,10.1343,63.787],[-2.02922,8.19723,64.788]],[[3.3787,-10.9656,7.63726],[4.40881,-9.77171,9.42219]],[[5.09995,1.75695,66.9628],[1.06949,5.36287,63.7582]],[[-4.09162,-5.93921,72.7302],[-4.12101,-5.7785,73.1887]],[[1.29368,-5.89343,85.9301],[2.03701,4.90298,80.4926]],[[0.93173,-4.28755,40.8383],[-24.6034,-4.84411,85.63]],[[-8.72677,-0.46968,22.3142],[-12.9045,7.34891,23.5574]],[[-1.7893,-9.96216,90.0726],[1.5431,-8.34229,89.0836]],[[7.50542,-5.07859,32.4525],[3.37973,-4.28795,52.6696]],[[6.31397,4.44502,82.385],[5.83851,4.03272,81.3156]],[[8.60469,1.02268,31.6401],[-0.176522,-0.168081,33.4221]],[[1.24485,8.14936,43.1413],[-2.0474,7.10376,40.7013]],[[-1.88452,8.90011,40.7108],[-2.58928,6.55536,46.0783]],[[6.16871,5.36424,64.8076],[6.28178,4.74376,51.7302]],[[2.125,24.6129,2.82998],[0.854857,23.2917,12.1164]],[[1.59276,4.77096,5.69018],[-0.298144,4.72488,16.5196]],[[4.29792,9.97864,73.9589],[4.93243,9.62326,66.895]],[[-4.75143,4.59883,56.7776],[-4.80138,6.71334,55.0662]],[[-7.33512,-7.49748,56.5023],[-8.66274,5.96991,56.8324]],[[-5.60045,-2.4308,15.4256],[-6.34071,-12.0673,20.4405]],[[1.95044,6.98111,41.3218],[-27.759,-7.46372,45.2243]],[[5.83056,-2.4015,82.7744],[7.10416,6.8049,76.5176]],[[4.93698,-1.85766,74.2879],[6.15969,16.9898,79.6402]],[[6.70278,-4.1081,69.2187],[6.96404,4.27711,66.4715]],[[-3.36344,1.40904,77.994],[-2.96675,0.949197,90.0931]],[[-8.59493,-0.909146,44.9944],[-8.48164,-1.19313,39.4415]],[[7.02872,1.713,45.4979],[-0.102725,5.18074,38.5159]],[[2.14148,13.0805,74.1939],[6.04191,-1.04714,74.2103]],[[-6.71194,5.49608,-69.1784],[-1.87568,5.12765,-64.1935]],[[6.24134,8.34346,14.5393],[7.23252,8.39092,18.6486]],[[3.63018,5.58214,77.1212],[2.59811,0.560379,75.8831]],[[9.03989,0.17304,-4.8442],[14.2784,-3.96041,7.57132]],[[-2.81106,-6.12049,100.842],[3.10085,-1.16201,99.0299]],[[-7.2692,3.8023,30.2033],[-7.80126,5.05858,47.1215]],[[-2.60048,-3.15592,54.7768],[-2.40235,-3.13993,52.0965]],[[-5.7152,8.44234,60.9268],[-10.9339,8.31212,57.0266]],[[-1.94372,-8.56319,93.2685],[-1.0293,-8.55303,79.3169]],[[-7.49138,-13.4907,9.51048],[-15.3454,-10.5849,7.16563]],[[2.36366,7.01773,98.7674],[2.37158,5.54023,90.415]],[[-8.15912,-6.43544,-8.48994],[-7.84358,-1.959,-2.04058]],[[-6.16321,1.92907,78.182],[-5.02407,0.17793,75.1138]],[[1.94494,-7.24662,60.007],[3.97297,-7.31792,61.0497]],[[-1.73742,-3.75652,91.8653],[-14.4024,-4.15295,91.7347]],[[-5.87756,-8.3874,73.932],[-5.14108,2.13324,74.9018]],[[-0.301828,-0.559404,90.6299],[1.36346,5.76431,90.6616]],[[-4.55306,-3.35185,13.1697],[-5.49064,-2.11627,-2.55199]],[[-8.07855,-10.7843,43.8865],[-9.06268,4.04252,62.6986]],[[5.09018,-1.83935,31.0157],[4.84084,-1.8045,7.40369]],[[3.69121,1.40355,55.3945],[11.8683,10.9351,55.699]],[[-8.09198,-4.60982,0.480056],[-5.68494,-7.82817,1.9191]],[[-2.09632,-10.7569,89.8242],[-12.4245,-5.82892,106.447]],[[-1.15513,0.509964,8.79208],[-15.8189,0.32874,-10.9]],[[-0.195624,0.346995,108.697],[-0.147341,9.79043,107.961]],[[-2.0542,-9.76257,56.7977],[-5.272,-6.58577,53.0944]],[[-7.37358,-2.52419,8.93979],[-7.15892,-2.38231,15.665]],[[-0.50325,-1.10141,81.1429],[-10.087,-0.0549502,74.5918]],[[-2.79946,-3.51115,34.6748],[-12.1031,-2.2653,30.4741]],[[6.63625,-3.06986,73.2405],[17.6593,-1.17291,59.696]],[[7.99554,-0.0302133,36.2929],[-29.7819,-1.32542,35.3]],[[-4.7026,-2.67067,87.951],[-7.5655,13.1027,80.3372]],[[-1.30161,4.3553,42.2886],[3.86924,1.13146,33.2228]],[[-9.48424,-4.51643,9.49705],[-22.3413,-1.41923,8.33897]],[[-8.80856,6.30543,38.7436],[-6.76716,5.21142,56.4686]],[[-4.9498,8.09809,63.3573],[-2.9394,29.7891,62.8459]],[[7.44926,6.02344,62.5248],[7.66353,6.20305,52.7368]],[[3.23099,6.45558,9.94018],[1.84755,6.3179,24.5342]],[[2.90201,4.71786,75.6508],[-0.375152,5.88239,78.3497]],[[-7.52068,0.273751,21.1325],[-7.54572,1.61544,-7.74187]],[[4.29853,-6.62404,69.7357],[5.63851,-4.26581,73.3472]],[[1.9834,-0.348827,77.853],[-1.47125,-0.871257,73.1981]],[[7.02445,2.7018,70.0513],[9.89253,-0.561423,60.4692]],[[0.805994,0.621662,23.6235],[-5.83455,10.6141,26.4874]],[[7.81732,-9.27732,45.4241],[6.94113,-3.53864,52.8298]],[[0.954924,-0.284738,12.6124],[-1.41575,5.75329,3.57607]],[[3.43181,2.45277,67.2381],[-1.13796,-8.54045,63.1817]],[[2.92093,3.23832,37.1859],[4.38452,1.70352,37.6207]],[[0.495315,-9.14365,25.2416],[10.0341,-11.057,22.0109]],[[6.03748,10.4804,28.6523],[3.34157,9.59733,41.799]],[[-0.105899,4.20881,107.69],[3.28014,3.96965,139.438]],[[1.66112,-11.5278,4.28694],[-0.0764909,-3.79199,2.63721]],[[9.11008,2.12683,26.6448],[5.47435,2.40057,15.1079]],[[-1.7069,-6.6332,37.7767],[-1.72298,6.73548,37.0015]],[[0.681478,9.85412,23.3146],[0.752766,9.90219,22.0958]],[[0.555132,7.20634,24.3083],[0.404608,13.1856,21.7773]],[[-2.19459,5.53087,91.1536],[-1.81802,8.90192,104.447]],[[4.76608,-5.5089,43.0741],[5.09977,33.4978,42.8639]],[[-3.22245,-2.37403,12.8944],[-0.529199,0.155325,11.4768]],[[-5.20981,-5.72497,84.1441],[-5.40605,-4.80689,81.4537]],[[5.15732,-0.784631,11.6523],[-3.34997,1.17719,31.0394]],[[-6.39821,14.1609,32.8083],[-6.07762,11.0327,52.8016]],[[3.73333,-4.9266,62.2294],[0.325629,-4.85785,39.2209]],[[-4.70077,7.71538,59.2752],[-4.13745,-7.3546,67.0143]],[[-5.27329,-14.7542,11.3837],[-2.03814,-9.67357,8.84357]],[[2.52358,16.5706,77.3428],[5.57871,13.7175,82.9541]],[[0.0143437,3.93048,6.11988],[-0.19567,13.0579,13.2556]],[[1.4359,-5.24155,88.8507],[7.21286,-5.96369,123.72]],[[-2.89468,13.4156,36.3466],[-8.06919,11.9945,37.4041]],[[-3.18766,-5.07309,74.8988],[-1.32734,-5.39853,64.0417]],[[-7.63909,-7.31254,30.6598],[-0.828919,-7.36414,32.5534]],[[-6.0094,5.38255,70.152],[-4.99149,15.0287,74.4524]],[[-1.22593,5.93371,65.4051],[4.01543,10.3156,74.7461]],[[-1.68493,5.46129,24.5433],[2.15806,-22.0026,7.12298]],[[3.70647,5.56017,93.9198],[3.46331,4.55958,79.609]],[[2.25135,-16.307,60.2487],[6.99335,-11.2392,33.3003]],[[1.45665,-0.603351,85.0975],[1.47374,-0.602582,118.241]],[[-0.0283822,-7.02872,15.5263],[0.0209203,-8.34216,6.10908]],[[7.63665,8.50826,34.8897],[1.55753,0.386577,33.6341]],[[6.53005,-2.61391,62.4375],[15.0135,-5.01942,58.977]],[[-1.18686,-22.161,44.6855],[-2.74132,-21.722,43.4315]],[[4.61653,-16.4113,50.6677],[18.7636,-8.84767,50.9312]],[[-2.68777,2.11768,26.2621],[1.55722,2.22489,10.0176]],[[-8.51436,-9.02097,39.8715],[-16.2304,-8.60429,44.5319]],[[6.81936,-4.08063,54.3605],[13.2089,-2.63408,53.2476]],[[3.68206,1.94006,97.0553],[3.90951,2.02588,81.8356]],[[6.84866,1.54454,1.82287],[7.49375,-0.190618,12.1716]],[[-1.36265,-6.20838,62.6054],[0.341735,-4.79403,45.2233]],[[3.36589,-9.66369,39.8648],[3.22002,-9.60789,36.7541]],[[8.04193,16.9533,17.2585],[3.52504,8.20082,16.2854]],[[-0.618,-1.50792,40.5362],[-6.04777,-3.84381,54.1017]],[[-3.66558,-10.1636,3.80352],[-8.74354,-9.49825,15.4162]],[[6.03442,8.86166,32.768],[6.29669,6.78888,22.0818]],[[-0.221259,-10.2844,2.14515],[-14.1524,4.95465,-6.78552]],[[0.731529,-10.4163,54.864],[0.424285,-8.71468,66.0597]],[[4.42427,-12.8553,32.8687],[5.57548,13.9825,4.3206]],[[9.3347,0.279244,17.9769],[4.53317,2.78308,8.26543]],[[4.90463,-7.88202,4.23322],[6.26477,-10.6685,8.20054]],[[5.04074,4.48347,10.5445],[3.07742,3.49185,7.17542]],[[-4.53719,-3.87921,83.842],[14.4551,-3.4993,75.1033]],[[6.20411,-1.85949,5.11948],[5.09422,-2.25866,6.40132]],[[-0.456862,-6.98111,-23.8987],[-0.0552295,-5.87906,-19.1444]],[[6.97073,-0.363475,9.93347],[1.42221,-0.131918,23.34]],[[-2.62307,-16.2758,20.5887],[-1.92645,-16.1077,26.4238]],[[8.17072,12.6044,30.7135],[12.0172,11.2524,39.9664]],[[-0.20661,17.2866,70.9375],[-0.866791,16.2788,71.9646]],[[4.18561,-0.764489,67.1776],[4.40043,15.5642,58.1999]],[[-1.81433,16.8526,58.7918],[-3.5918,13.2831,36.7022]],[[-4.15326,0.575884,14.8213],[6.4362,-2.8917,13.954]],[[-2.22877,-14.1426,15.3047],[-7.6235,-9.5048,15.157]],[[1.65502,-3.36283,74.0596],[1.67375,-6.93392,106.686]],[[-5.98315,-9.66918,-8.92636],[-1.58262,-10.4175,16.2881]],[[-0.597858,-0.480667,68.0572],[-0.788473,-0.363339,71.5972]],[[-5.01816,6.26148,39.2337],[-4.38351,0.580197,37.9264]],[[-1.52013,-2.36488,53.5279],[-1.30367,-31.2376,55.4539]],[[0.836512,-1.93091,1.11789],[4.46887,-1.82944,1.64537]],[[0.247505,4.79293,105.743],[0.271744,3.4986,101.734]],[[1.32359,4.15387,95.5916],[4.95327,4.22905,105.9]],[[-6.60146,7.35099,52.5611],[-6.57091,6.8787,35.5573]],[[-4.71725,-4.58419,37.4209],[13.3518,-7.08034,27.4986]],[[-2.51137,-1.82836,81.1832],[-5.15321,-0.837382,97.7211]],[[5.25864,20.3006,37.7499],[9.98481,13.6719,37.228]],[[-4.38337,2.27515,34.9501],[-3.34329,4.08694,43.8647]],[[-0.244453,2.00049,102.648],[-0.0114648,2.30244,112.104]],[[-8.93674,-4.10993,-4.0318],[-8.65586,13.2777,-3.01922]],[[-5.19944,-3.9964,0.433058],[0.502602,9.67427,-4.76626]]]
# print(d_new)

#f = open("data_elips.txt", "r")
#print(f.read(), type(f.read()))

#s = f.read()
#f.close()
#print(ast.literal_eval(s))
s = []
with open('data_elips.txt', 'r') as f:
    for i in f.readlines():
        print(i)
        if not i.strip():  # do nothing for empty lines
            continue
        i = ast.literal_eval(i)
        print(i)

print(s)

fig = plt.figure()
#ax = fig.add_subplot(111, projection="3d")
ax = Axes3D(fig)

A = np.array([[1/(10**2),0,0],[0,1/(30**2),0],[0,0,1/1e-20]])
center = [0,0,0]

# find the rotation matrix and radii of the axes
U, s, rotation = linalg.svd(A)
radii = 1.0/np.sqrt(s)

# now carry on with EOL's answer
u = np.linspace(0.0, 2.0 * np.pi, 100)
v = np.linspace(0.0, np.pi, 100)
x = radii[0] * np.outer(np.cos(u), np.sin(v))
y = radii[1] * np.outer(np.sin(u), np.sin(v))
z = radii[2] * np.outer(np.ones_like(u), np.cos(v))
for i in range(len(x)):
    for j in range(len(x)):
        [x[i,j],y[i,j],z[i,j]] = np.dot([x[i,j],y[i,j],z[i,j]], rotation) + center

# plot
ax = fig.add_subplot(111, projection='3d')
ax.plot_wireframe(x, y, z,  rstride=4, cstride=4, color='b', alpha=0.2)
#ax.set_zlim(-200, 300)
ax.set_ylim(-30, 30)
ax.set_xlim(-10, 10)


lns = []
for i in range(len(d)):
    # for i in range(2):
    d_new = np.transpose(d[i]).tolist()
    ls = ax.plot3D(d_new[0], d_new[1], d_new[2], color='r')
    lns.append(ls)

# ax.set_zlim(-200, 300)
ax.set_xlabel("x")
ax.set_ylabel("y")
ax.set_zlabel("z")
lns_new = []
for i in range(len(d)):
    # for i in range(2):
    d_new = np.transpose(d[i]).tolist()
    ls = ax.scatter(d_new[0][0], d_new[1][0], d_new[2][0], color='g')
    ls2 = ax.scatter(d_new[0][1], d_new[1][1], d_new[2][1], color='b')

    lns_new.append([ls, ls2])

plt.show()


